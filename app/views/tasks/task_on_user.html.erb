<h1>Task#index</h1>

<% if can? :edit, @tasks %>
  <%= link_to 'New task', new_task_path %>
<% end %>

<% if params[:user_id]%>
  <p>
    Tasks on user <%= @user.email%>, <%= @tasks.size%> pcs.
  </p>
<% end %>

<table>
  <tr>
    <th>ID</th>
    <th>title</th>
    <th>content</th>
    <th>comments</th>
    <th>status</th>
    <th>start_date</th>
    <th>due_date</th>
    <th>estimation</th>
    <th>created_at</th>
    <th>updated_at</th>
  </tr>

  <% @tasks.each do |task| %>
    <tr>
      <td><%= task.id %></td>
      <td><%= task.title %></td>
      <td><%= task.content %></td>
      <td><%= task.comments %></td>
      <td><%= task.status %></td>
      <td><%= task.start_date %></td>
      <td><%= task.due_date %></td>
      <td><%= task.estimation %></td>
      <td><%= task.created_at %></td>
      <td><%= task.updated_at %></td>
      <td><%= link_to 'Show', task_path(task) %></td>

      <% if can? :manage, @tasks %>
        <td><%= link_to 'Edit', edit_task_path(task) %></td>
        <td><%= link_to 'Destroy', task_path(task), method: :delete,
                        data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tr>
  <% end %>
</table>